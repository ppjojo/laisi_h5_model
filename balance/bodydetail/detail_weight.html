<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
	<title>体重</title>
	<link rel="stylesheet" type="text/css" href="css/index.css">
</head>

<body>
	<div class="itemContain" id="app" v-cloak>
		<div class="topBg">
			<div class="numBox">
				<div>
					<div class="num">{{bodyData.weight}}</div>
					<div class="dw">kg</div>
				</div>
			</div>
			<div class="numInfo">
				{{bodyData.weightType}}
			</div>
		</div>
		<div class="itemContent">
			<div class="lineBox">
				<div class="lineNum">
					<div>{{bodyData.weightRange[0]}}</div>
					<div>{{bodyData.weightRange[1]}}</div>
					<div>{{bodyData.weightRange[2]}}</div>
					<div></div>
				</div>
				<div class="line">
					<div class="bg-green"></div>
					<div class="bg-green02"></div>
					<div class="bg-yellow"></div>
					<div class="bg-orange rightDiv"></div>
					<span class="point" :style="{'left':leftNum+'%'}"></span>
				</div>
				<div class="lineInfo">
					<div>偏轻</div>
					<div>标准</div>
					<div>偏重</div>
					<div>超重</div>
				</div>
				<div class="detailInfo">
					{{bodyData.weightDescription}}
				</div>
			</div>

			<div class="imgBox">
				<div class="title"><img src="img/icon_standard.png">体重参考标准</div>
				<div class="standard_table"><img src="images/item_form_weight.png"></div>
			</div>
		</div>
	</div>
	<script src="../../common/js/network.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
	<script>
		new Vue({
			el: '#app',
			data() {
				return {
					memberId: getQueryString("memberId"), //成员id
					measureId: getQueryString("measureId"), //数据id
					deviceType: getQueryString("deviceType"), //设备类型 区分是不是非智能体脂秤
					bodyData: {},
					leftNum: 0,
				};
			},
			created() {
				this.initData();
			},
			methods: {

				initData() {
					var that = this
					ajax({
						type: "get",
						url: getQueryString('deviceType') == 'blebalance' ?
							"bleBalance/h5/data/body/detail/accredited/weight" :
							"balance/h5/data/body/detail/accredited/weight",

						data: {
							memberId: this.memberId,
							measureId: this.measureId,
						},
						success: function (res) {
							if (res.code == 0) {
								that.bodyData = res.data;
								var number =res.data.weight;
								var index01 =res.data.weightRange[0];
								var index02 = res.data.weightRange[1];
								var index03 = res.data.weightRange[2];
								if (number < index01) {
									that.leftNum=((number-30)/(index01-30))*25
								} else if (number < index02) {
									that.leftNum=((number-index01)/(index02-index01))*25+25
								} else if (number < index03) {
									that.leftNum=((number-index02)/(index03-index02))*25+50
								} else {
									that.leftNum=((number-index03)/(100-index03))*25+75
								}
								if(that.leftNum<0){
									that.leftNum=0
								}else if(that.leftNum>98){
									that.leftNum=98
								}
							}
						},
						error: function (err) {
							console.log("error")
						}
					})
				},
			}
		})
	</script>
</body>

</html>