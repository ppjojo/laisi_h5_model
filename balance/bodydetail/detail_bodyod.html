<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1,maximum-scale=1, minimum-scale=1">
	<meta name = "format-detection" content = "telephone=no">
	<title>肥胖度</title>
	<script type="text/javascript">
		document.documentElement.style.fontSize = document.documentElement.clientWidth / 6.4 + 'px';
	</script>
	<!-- <script src="https://cdn.bootcss.com/vConsole/3.3.4/vconsole.min.js"></script>
	<script>
		// init vConsole
		var vConsole = new VConsole();
		console.log('Hello world');
	</script> -->
	<link rel="stylesheet" type="text/css" href="css/body_detail_item.css?t=20180713">
</head>
<body>
	<!-- <div class="Menu">
        <ul class="clearboth">
            <li><a href="detail_weight.html">体重</a></li>
            <li><a href="detail_bmi.html">BMI</a></li>
            <li><a href="detail_bodyage.html">身体年龄</a></li>
            <li class="cur"><a href="#">体脂</a></li>
            <li><a href="detail_sharp.html">体型</a></li>
            <li><a href="detail_muscle.html">肌肉</a></li>
            <li><a href="detail_bone.html">骨量</a></li>
            <li><a href="detail_water.html">水分</a></li>
            <li><a href="detail_viscera.html">内脏脂肪等级</a></li>
            <li><a href="detail_kcal.html">基础代谢</a></li>
            <li><a href="detail_protein.html">蛋白质</a></li>
            <li><a href="detail_score.html">身体得分</a></li>
        </ul>
    </div> -->
	<div class="banner banner_bodyfat">
		<div class="content">
			<div class="banner_text">
				<!-- <span class="type">体脂</span><br /> -->
				<div class="circleborder">
					<div><span class="number" id="number"></span>
					<span class="unit">%</span><br /></div>
				</div>
				<span class="index"></span>
			</div>
		</div>
	</div>

	<div class='boxlist'>
		<div class="box box-top">
			<div class="ruler ruler-g7">
				<span id="index01">-20</span>
				<span id="index02">-10</span>
				<span id="index03">10</span>
				<span id="index04">20</span>
				<span id="index05">30</span>
				<span id="index06">50</span>
			</div>
			<div class="lines lines-g7">
				<div class="scale"></div>
				<span class="bg-green02"></span>
				<span class="bg-green03"></span>
				<span class="bg-green"></span>
				<span class="bg-yellow"></span>
				<span class="bg-orange2"></span>
				<span class="bg-orange"></span>
				<span class="bg-red"></span>
			</div>
			<div class="text text-g7">
				<span>消瘦</span>
				<span>偏瘦</span>
				<span>标准</span>
				<span>超重</span>
				<span>轻度</span>
				<span>中度</span>
				<span>重度</span>
			</div>
			<p class="text02"></p>
		</div>
		<div class="box box-bottom">
			<div class="title"><img src="images/icon_advice.png"><p>小建议</p></div>
			<div class="list">
				<!-- <img src="images/icon_eat.png"> -->
				<p>饮食建议</p>
			</div>
			<p id="dietaryAdvice"></p>
			<div class="list">
				<!-- <img src="images/icon_exercise.png"> -->
				<p>运动建议</p>
			</div>
			<p id="sportAdvice"></p>
		</div>
		<div class="box">
			<div class="title"><img src="images/icon_standard.png"><p>肥胖度参考标准</p></div>
			<p id="definition"></p>
			<p><img src="images/item_form_bodyod.png"></p>
		</div>
	</div>
	
	
	<script src="../common/js/jquery-1.10.1.min.js"></script>
	<script src="js/main.js"></script>
	<script src="js/body_detail_item.js" type="text/javascript"></script>
	<script src="../../common/js/network.js"></script>
	<script type="text/javascript">
		ajax({
			type: "get",
			url: "bleBalance/h5/data/body/detail/accredited/od",
			data: {
				memberId : getQueryString("memberId"),
				measureId : getQueryString("measureId"),
			},
			success:function(res){
				if (res.code == 0) {
					setBmi(res)
				}
			},
			error: function(err) {
				console.log("error")
			}
		})
		
		function setBmi(data){
			var data = data.data;
			console.log(data);
			var number = parseFloat(data["od"]);
			data["range"] = [-20,-10,0,10,20,30]
			var index01 = data["range"][0];
			var index02 = data["range"][1];
			var index03 = data["range"][2];
			var index04 = data["range"][3];
			var index05 = data["range"][4];
			var index06 = data["range"][5];
			var index_min = index01-7, index_max = index06+7;
			if(number<index_min) number=index_min;
			// if(number>index_max) number=index_max;
			var percent;
			
			$("#number").html(Math.floor(data["od"]));
			// $("#index01").html(index01);
			// $("#index02").html(index02);
			// $("#index03").html(index03);
			// $("#index04").html(index04);
			// $("#index05").html(index05);
			// $("#index06").html(index06);
			$(".index").html(data["odType"]);
			$(".text02").html(data["description"]);
			$("#dietaryAdvice").html(data["dietaryAdvice"]);
			$("#sportAdvice").html(data["sportAdvice"]);
			$("#definition").html(data["definition"]);
			if(number<=index01){
				percent=(index01*-1)/(number*-1) *12.5-2
				console.log(percent)
				$(".scale").addClass("bg-green02").css("left",percent+"%").fadeIn();
				// $(".index").html("消瘦");
			}else if(number<=index02){
				console.log(number)
				percent=(index02*-1)/(number*-1)*25
				$(".scale").addClass("bg-green").css("left",percent+"%").fadeIn();
				// $(".index").html("偏瘦");
			}else if(number<=index04){
				percent=(number-index02)*0.625+25+2
				$(".scale").addClass("bg-yellow").css("left",percent+"%").fadeIn();
				// $(".index").html("标准");
			}else if(number<=index05){
				percent=(number - index04)*1.5 +40
				console.log(percent)
				$(".scale").addClass("bg-yellow").css("left",percent+"%").fadeIn();
				// $(".index").html("轻度");
			}else if(number<=index06){
				percent=(number - index05)*1.5 +55
				console.log(percent)
				$(".scale").addClass("bg-yellow").css("left",percent+"%").fadeIn();
				// $(".index").html("高度");
			}else if(number<=50){
				percent=(number - 30)*0.7 +70
				console.log(percent)
				$(".scale").addClass("bg-yellow").css("left",percent+"%").fadeIn();
				// $(".index").html("高度");
			}else if(number<=70){
				percent=(number - 50)*.6 +84
				console.log(percent)
				$(".scale").addClass("bg-yellow").css("left",percent+"%").fadeIn();
				// $(".index").html("高度");
			}else{
				percent=98;
				$(".scale").addClass("bg-orange").css("left",percent+"%").fadeIn();
				// $(".index").html("高度");
			}
			console.log(percent)
		}
		
		
	</script>
</body>
</html>