<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
    <title>兑换结果</title>
    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="https://oss.laisitech.com/ccd1029d-8dd1-442a-94a7-5205ee2ff9f5.css">
    <link rel="stylesheet" href="../common/css/basic.css">
    <link rel="stylesheet" href="css/font/iconfont.css">
    <link rel="stylesheet" id="themeCssLink" href="../common/css/theme_black.css">
    <link rel="stylesheet" href="css/pointsLottery.css">
    <style type="text/css">
        #app img {
            width: 3.6rem;
            margin: .96rem auto .48rem;
            border-radius: 50%;
        }
        
        .resulttxt {
            font-size: .32rem;
            text-align: center;
            font-family: 'PingFangSC-Regular';
            color: #71717f;
        }
    </style>

</head>

<body>
    <div id="app" v-cloak>
        <div class="header">
            <van-nav-bar :title="isSuccess==1?'兑换成功':'兑换失败'" @click-left="OnclickLeft" safe-area-inset-top fixed>
                <template #left>
						<span class="icon iconfont icon-fanhuianniu" style="font-size: 0.5rem;" />
					</template>
            </van-nav-bar>
        </div>
        <div id="demoCanvas" style=""></div>
        <div class="ub ub-ac ub-pc">
            <img v-if="isSuccess==1" src="./img/ordersuccess.png" alt="">
            <img v-else src="./img/orderfail.png" alt="">
        </div>
        <div v-if="fromwhere == 1" class="resulttxt">{{isSuccess==1?'静待快递小哥将宝贝送上门吧！':'好像出错了，请重新下单！'}}</div>
        <div v-else class="resulttxt">{{isSuccess==1?'兑换成功！':'兑换失败！'}}</div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script src="https://cdn.jsdelivr.net/npm/vant@2.12/lib/vant.min.js"></script>
<script src="../common/js/network.js"></script>
<script src="js/tool.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                isSuccess: getQueryString("isSuccess") || 2, //1成功2失败
                fromwhere: getQueryString("fromwhere") || 2, //1订单2兑换
                menuindex: getQueryString("menuindex") || 0
            }
        },
        filters: {},
        mounted() {
            var _this = this;
            if (this.fromwhere == 2) {
                setTimeout(function() {
                    if (_this.isSuccess == 1) {
                        window.location.replace("./package.html?menuindex=" + _this.menuindex + '&fromindex=1');
                    } else {
                        window.history.back(-1);
                    }
                }, 2500)
            } else {

                setTimeout(function() {
                    if (_this.isSuccess == 1) {
                        window.location.replace("./changerecord.html");
                    } else {
                        window.location.replace("./package.html?menuindex=1&fromindex=1");
                    }
                }, 2500)

            }
        },
        created() {

        },
        methods: {
            OnclickLeft() {
                if (this.fromwhere == 1) {
                    if (this.isSuccess == 1) {
                        window.location.replace("./changerecord.html");
                    } else {
                        window.location.replace("./package.html?menuindex=1&fromindex=1");
                    }
                } else {
                    if (this.isSuccess == 1) {
                        window.location.replace("./package.html?menuindex=" + this.menuindex + '&fromindex=1');
                    } else {
                        window.history.back(-1);
                    }
                }
            }



        }
    })
</script>

</html>