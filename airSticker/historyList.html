<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
    <link rel="icon" href="data:image/ico;base64,aWNv">
    <title>历史数据</title>
	<script type="text/javascript">
		document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';
	</script>
    <link href="css/histroyList.css?t=20190524" rel="stylesheet" type="text/css"/>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js"></script>
    </head>
<body>
    <div id="app">
        <div class="main_contaniner"
            @touchstart.capture="touchStartY" 
            @touchend.capture="touchEndY" 
        >
            <div class="data_container">
                    <!-- 设备名及数据项 -->
                    <p class="devicename" v-html="devicename" >----------</p>
        
                    <div class="datanumlist">
                        <div class="datanum txt-left">
                            <p class="blodnum" v-html="eTimes">--</p>
                            <p class="name">累计优(次)</p>
                        </div>
                        <div class="datanum txt-center">
                            <p class="blodnum" v-html="gTimes">--</p>
                            <p class="name">累计良(次)</p>
                        </div>
                        <div class="datanum txt-right">
                            <p class="blodnum" v-html="mTimes">--</p>
                            <p class="name">累计中(次)</p>
                        </div>
                    </div>
                    <div class="datanumlist_line2">
                        <div class="datanum txt-left">
                            <p class="blodnum" v-html="pTimes">--</p>
                            <p class="name">累计较差(次)</p>
                        </div>
                        <div class="datanum txt-center">
                            <p class="blodnum" v-html="bTimes">--</p>
                            <p class="name">累计差(次)</p>
                        </div>
                    </div>
            </div>

            <!-- echarts -->
            <div class="charts" id='chartsDiv' >
                <div id="chartColumn" style="width:100%; height:200px;"></div>
            </div>

            <!-- 数据列表 -->
            <div class="datalist">
                <div class="monthlist">
                    <div class="monthitem" v-for="(monthitem, index) in monthlist" :key="index"  
                    >

                    <!-- 月统计（包括月删除） -->
                    <div class="monthitem-sumcontent"
                        data-type="0" :data-index="index" 
                    >
                        <div class="monthitem_content" 
                            @touchstart.capture="touchMonthItemStart" 
                            @touchend.capture="touchMonthItemEnd" 
                            :data-index="index"
                            @click.stop="selectMonth(monthitem, index)"
                        >
                        <!-- @click.stop="selectMonth(monthitem, index)" -->
                            <div class="data">
                                <div class="title">
                                    <img src="images/icon_air.png" alt="">
                                    <span>空气</span>
                                </div>
                                <div class="numlist">
                                    <p class="numitem"><span class="txt-margin">优</span><span v-html="monthitem.ex || '0' "></span>次</p>
                                    <p class="numitem"><span class="txt-margin">良</span><span v-html="monthitem.gd || '0' "></span>次</p>
                                    <p class="numitem"><span class="txt-margin">中</span><span v-html="monthitem.medium || '0' "></span>次</p>
                                    <p class="numitem"><span class="txt-margin">较差</span><span v-html="monthitem.poor || '0' "></span>次</p>
                                    <p class="numitem"><span class="txt-margin">差</span><span v-html="monthitem.bad || '0' "></span>次</p>
                                </div>
                            </div>
                            <div class="time">
                                <div class="down">
                                    <p class="month" v-html="monthitem.month || '--' "></p>
                                    <img :class=" index  == openMonthid ? 'turn': '' " src="images/icon_down.png" alt="" />
                                </div>
                                <p class="year" v-html="monthitem.year || '----' " ></p>
                            </div>
                        </div>

                        <div class="item_del" @click.stop="deleteMonthItem" :data-index="index">
                            <img src="images/icon_del.png" alt="" />
                        </div>

                    </div>
                    
                    
                        <div class="daylist" v-if="index == openMonthid">
                            <div class="dayitem" v-for="(dayitem, index) in daylist" :key="index" @click.stop="selectDay(dayitem)">
                                <div class="dayitem_content" >
                                    <div class="daytime">
                                        <span v-html="dayitem.time || '----' "></span>
                                        <img :class=" dayitem.id == openDayid ? 'turn': '' " src="images/icon_down.png" alt="" />
                                    </div>
                                </div>

                                <div class="day_time_list" v-if="dayitem.id == openDayid">
                                    <div class="list-item" v-for="(itemdata,index) in day_time_list" :key="index"  data-type="0" :data-index="index">
                                        <div class="item_data item-box"
                                            @touchstart.capture="touchStart" 
                                            @touchend.capture="touchEnd" 
                                            :data-index="index"  
                                            @click.stop="skip">
                                            <div class='left'>
                                                <p class="time" v-html="itemdata.time || '----' " ></p>
                                                <div class="numlist">
                                                    <div class="numitem ppm">
                                                        <p class="mode" :class="itemdata.bgClass" v-html="itemdata.leveltxt || '--' "  ></p>
                                                        <p class='bloddata'><span v-html="itemdata.num || '0' "></span><span class="unit">PPM</span></p>
                                                    </div>
                                                    <div class="numitem">
                                                        <img src="images/icon_temp.png" alt=""/>
                                                        <p class='bloddata'><span v-html="itemdata.temperature || '0' "></span><span class="unit">°C</span></p>
                                                    </div>
                                                    <div class="numitem">
                                                        <img src="images/icon_humidity.png" alt=""/>
                                                        <p class='bloddata'><span v-html="itemdata.humidity || '0' "></span><span class="unit">%</span></p>
                                                    </div>
                                                </div>
                                            </div>
                                            <img src="images/icon_right.png" alt=""/>
                                        </div>
                                        <div class="item_del" @click.stop="deleteItem" :data-index="index">
                                            <img src="images/icon_del.png" alt="" />
                                        </div>
                                    </div>

                                    <!-- 加载等待区域 -->
                                    <div class='loading' v-show='loading'>
                                        <div class="spinner">
                                            <div class="spinner-container container1">
                                                <div class="circle1"></div>
                                                <div class="circle2"></div>
                                                <div class="circle3"></div>
                                                <div class="circle4"></div>
                                            </div>
                                            <div class="spinner-container container2">
                                                <div class="circle1"></div>
                                                <div class="circle2"></div>
                                                <div class="circle3"></div>
                                                <div class="circle4"></div>
                                            </div>
                                            <div class="spinner-container container3">
                                                <div class="circle1"></div>
                                                <div class="circle2"></div>
                                                <div class="circle3"></div>
                                                <div class="circle4"></div>
                                            </div>
                                        </div>           
                                    </div>

                                </div>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</body>

<script src="https://cdn.bootcss.com/echarts/3.7.2/echarts.min.js"></script>
<script src="../common/js/network.js" type="text/javascript"></script>
<script src="js/historyList.js" type="text/javascript"></script>

</html>